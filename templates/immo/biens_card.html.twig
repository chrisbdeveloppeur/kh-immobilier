{% set logement_status_color = '' %}
{% if bien_immo.locataires is empty %}
    {% set logement_status_color = 'light' %}
{% else %}
    {% set logement_status_color = 'info' %}
{% endif %}
<div class="card mb-5">
    <header class="card-header has-background-dark">
        <p class="card-header-title has-text-{{ logement_status_color }} has-icons-left is-flex-direction-column-touch">

            {% if is_granted('ROLE_SUPER_ADMIN') %}
                {% if bien_immo.user %}
                    <a href="{{ path('user_edit', {'id': bien_immo.user.id }) }}" class="has-text-dark has-text-weight-normal has-background-info is-flex is-justify-content-center is-align-items-center hovertext" data-hover="Voir le gestionnaire {{ bien_immo.user }}" style="padding: 5px;width:35px;height:35px;border-radius: 50%;">
                        {{ bien_immo.user.firstname|first|capitalize }}{{ bien_immo.user.lastname|first|capitalize }}
                    </a>
                {% elseif bien_immo.locataires.current.user %}
                    <a href="{{ path('user_edit', {'id': bien_immo.locataires.current.user.id }) }}" class="has-text-dark has-text-weight-normal has-background-info is-flex is-justify-content-center is-align-items-center hovertext" data-hover="Voir le gestionnaire {{ bien_immo.locataires.current.user }}" style="padding: 5px;width:35px;height:35px;border-radius: 50%;">
                        {{ bien_immo.locataires.current.user.firstname|first|capitalize }}{{ bien_immo.locataires.current.user.lastname|first|capitalize }}
                    </a>
                {% else %}
                    <a class="has-text-dark has-text-weight-normal has-background-grey-lighter is-flex is-justify-content-center is-align-items-center hovertext not-allowed-onhover" disabled data-hover="Sans gestionnaire" style="padding: 5px;width:35px;height:35px;border-radius: 50%;">
                        N/A
                    </a>
                {% endif %}
            {% endif %}

            <span class="is-expanded column px-0 py-0 is-flex is-justify-content-center">
                <span class="icon-text has-text-{{ logement_status_color }}">
                    <span class="icon">
                        <i class="fas fa-lg {% if bien_immo.locataires is empty %}fa-home{% else %}fa-house-user{% endif %}"></i>
                    </span>
                    <span class="is-uppercase">{{ bien_immo.street }}</span>
                </span>
            </span>

            {% if bien_immo.type %}
                <span class="icon-text">
                    <span class="icon">
                        <i class="fas fa-warehouse"></i>
                    </span>
                    <span class="has-text-weight-bold">{{ bien_immo.type }}
                        {% if bien_immo.superficie != 0 %}
                            <span class="has-text-weight-bold is-size-7">({{ bien_immo.superficie }}m²)</span>
                        {% endif %}
                    </span>
                </span>
            {% endif %}

        </p>
    </header>
    <div class="card-content">
        <div class="content">

            <div class="column px-0 py-0">
                Adresse : <b>{{ bien_immo.street }}, {{ bien_immo.cp }} {{ bien_immo.city }}</b>
            </div>

            <div class="column px-0 py-0">
                Loyer : <b>{{ bien_immo.loyerHc }} €</b>
            </div>

            <div class="column px-0 py-0">
                Charges : <b>{{ bien_immo.charges }} €</b>
            </div>

            <div class="column px-0 py-0">
                Loyer TTC : <b>{{ bien_immo.loyerTtc|number_format(2) }} €</b>
            </div>

            Locataire :
            {% if bien_immo.locataires.current %}
                <a href="{{ path('locataire_edit', {'id': bien_immo.locataires.current.id}) }}#locataire" class="has-text-{{ logement_status_color }} has-text-weight-bold show-on-hover" title="Voir les détails du locataire">
                    <span>{{ bien_immo.locataires.current }}</span>
                    <span class="icon show-on-hover-target is-hidden-touch">
                        <i class="fas fa-search"></i>
                    </span>
                </a>
            {% else %}
                <a class="text-info-onhover show-on-hover" href="{{ path('bien_immo_edit', {'id': bien_immo.id}) }}#logement" title="Ajouter un locataire">
                    <span class="is-italic">Sans locattaire</span>
                    <span class="icon show-on-hover-target is-hidden-touch">
                        <i class="fas fa-user-plus add-loc"></i>
                    </span>
                    <span class="icon is-hidden-desktop">
                        <i class="fas fa-user-plus add-loc"></i>
                    </span>
                </a>
            {% endif %}
            <br>
            Syndic/Syndicat :
            {% if bien_immo.copropriete and bien_immo.copropriete.name %}
                <b class="is-uppercase">{{ bien_immo.copropriete.name }}</b>
            {% else %}
                <i>N/A</i>
            {% endif %}
        </div>
    </div>
    <footer class="card-footer is-flex-direction-column-mobil card-footer-column-mobil">
        <a href="{{ path('bien_immo_edit', {'id': bien_immo.id}) }}#logement" class="card-footer-item has-background-dark has-text-light bg-info-onhover has-text-centered">Gérer ce logement</a>
        {% if bien_immo.locataires is not empty %}
            <a href="{{ path('quittances_edit_new_quittance', {'loc_id': bien_immo.locataires.current.id}) }}" class="card-footer-item has-background-dark has-text-light bg-info-onhover has-text-centered is-flex is-flex-direction-column">
                <span>Editer une quittance</span>
            </a>
        {% endif %}
    </footer>
</div>
